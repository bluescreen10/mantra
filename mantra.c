#include "parrot/parrot.h"
#include "parrot/embed.h"
const void * get_program_code(void);
const char * program_code =
"\376\120\102\103\15\12\32\12\4\0\0\2\4\0\6\17\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
"\1\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\64\1\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
"\4\0\0\0\4\0\0\0\102\131\124\105\103\117\104\105\137\155\141\156\164\162\141\56\160\151\162\0\64\0\0\0"
"\44\0\0\0\2\0\0\0\106\111\130\125\120\137\155\141\156\164\162\141\56\160\151\162\0\0\0\0\130\0\0\0"
"\14\0\0\0\3\0\0\0\103\117\116\123\124\101\116\124\137\155\141\156\164\162\141\56\160\151\162\0\144\0\0\0"
"\310\0\0\0\5\0\0\0\102\131\124\105\103\117\104\105\137\155\141\156\164\162\141\56\160\151\162\137\104\102\0\0"
"\54\1\0\0\24\0\0\0\0\0\0\0\0\0\0\0\44\0\0\0\0\0\0\0\0\0\0\0\40\0\0\0"
"\41\0\0\0\5\0\0\0\3\0\0\0\10\0\0\0\3\0\0\0\157\0\0\0\0\0\0\0\3\0\0\0"
"\40\0\0\0\7\0\0\0\0\0\0\0\3\0\0\0\271\2\0\0\0\0\0\0\4\0\0\0\43\0\0\0"
"\5\0\0\0\1\0\0\0\4\3\0\0\2\0\0\0\2\0\0\0\40\0\0\0\5\0\0\0\2\0\0\0"
"\271\2\0\0\2\0\0\0\1\0\0\0\43\0\0\0\11\0\0\0\42\0\0\0\11\0\0\0\35\0\0\0"
"\14\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\1\0\0\0\2\0\0\0\155\141\151\156\0\0\0\0"
"\16\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\310\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
"\17\0\0\0\160\0\0\0\0\2\0\0\354\0\0\0\376\120\102\103\15\12\32\12\4\0\0\2\4\0\6\17"
"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\4\0\0\0\10\0\0\0\10\0\0\0\44\0\0\0"
"\1\0\0\0\14\0\0\0\40\0\0\0\1\0\0\0\2\0\0\0\237\377\377\377\1\0\0\0\1\0\0\0"
"\6\0\0\0\160\141\162\162\157\164\0\0\20\0\0\0\60\0\0\0\4\0\0\0\1\0\0\0\24\0\0\0"
"\113\0\0\0\1\0\0\0\6\0\0\0\160\141\162\162\157\164\0\0\30\0\0\0\60\0\0\0\4\0\0\0"
"\1\0\0\0\1\0\0\0\1\0\0\0\1\0\0\0\34\0\0\0\113\0\0\0\1\0\0\0\6\0\0\0"
"\160\141\162\162\157\164\0\0\1\0\0\0\40\0\0\0\40\0\0\0\0\0\0\0\0\0\0\0\234\377\377\377"
"\44\0\0\0\111\0\0\0\0\0\0\0\1\0\0\0\1\0\0\0\1\0\0\0\1\0\0\0\163\0\0\0"
"\1\0\0\0\4\0\0\0\155\141\151\156\163\0\0\0\1\0\0\0\7\0\0\0\123\164\141\162\164\165\160\0"
"\163\0\0\0\1\0\0\0\6\0\0\0\155\141\156\164\162\141\0\0\163\0\0\0\1\0\0\0\14\0\0\0"
"\143\157\155\155\141\156\144\137\154\151\156\145\160\0\0\0\0\2\0\0\64\0\0\0\376\120\102\103\15\12\32\12"
"\4\0\0\2\4\0\6\17\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\4\0\0\0\27\0\0\0"
"\1\0\0\0\2\0\0\0\1\0\0\0\163\0\0\0\1\0\0\0\10\0\0\0\50\60\170\60\60\60\62\51"
"\160\0\0\0\0\2\0\0\70\0\0\0\376\120\102\103\15\12\32\12\4\0\0\2\4\0\6\17\0\0\0\0"
"\0\0\0\0\0\0\0\0\0\0\0\0\4\0\0\0\27\0\0\0\2\0\0\0\2\0\0\0\2\0\0\0"
"\1\0\0\0\163\0\0\0\1\0\0\0\17\0\0\0\50\60\170\60\60\60\62\54\60\170\60\60\60\62\51\0"
"\160\0\0\0\0\2\0\0\60\0\0\0\376\120\102\103\15\12\32\12\4\0\0\2\4\0\6\17\0\0\0\0"
"\0\0\0\0\0\0\0\0\0\0\0\0\4\0\0\0\27\0\0\0\0\0\0\0\1\0\0\0\163\0\0\0"
"\1\0\0\0\2\0\0\0\50\51\0\0\163\0\0\0\1\0\0\0\12\0\0\0\155\141\156\164\162\141\56\160"
"\151\162\0\0\163\0\0\0\0\0\0\0\0\0\0\0\163\0\0\0\1\0\0\0\6\0\0\0\160\141\162\162"
"\157\164\0\0\160\0\0\0\0\2\0\0\164\0\0\0\376\120\102\103\15\12\32\12\4\0\0\2\4\0\6\17"
"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\4\0\0\0\15\0\0\0\0\0\0\0\40\0\0\0"
"\20\0\0\0\1\0\0\0\14\0\0\0\1\0\0\0\15\0\0\0\0\0\0\0\377\377\377\377\0\0\0\0"
"\0\0\0\0\0\0\0\0\4\0\0\0\1\0\0\0\1\0\0\0\1\0\0\0\1\0\0\0\1\0\0\0"
"\1\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\24\0\0\0\0\0\0\0\0\0\0\0\15\0\0\0"
"\25\0\0\0\31\0\0\0\33\0\0\0\34\0\0\0\34\0\0\0\34\0\0\0\37\0\0\0\40\0\0\0"
"\40\0\0\0\40\0\0\0\40\0\0\0\40\0\0\0\0\0\0\0\1\0\0\0\0\0\0\0\13\0\0\0"
""
;

const int bytecode_size = 1280;
        const void * get_program_code(void)
        {
            return program_code;
        }
        int main(int argc, const char *argv[])
        {
            PackFile     *pf;
            Parrot_Interp interp;
            const unsigned char *program_code_addr;

            program_code_addr = (const unsigned char *)get_program_code();
            if (!program_code_addr)
                return 1;

            Parrot_set_config_hash();

            interp = Parrot_new( NULL );
            if (!interp)
                return 1;

            Parrot_init_stacktop(interp, &interp);
            Parrot_set_executable_name(interp,
                Parrot_str_new(interp, argv[0], 0));
            Parrot_set_flag(interp, PARROT_DESTROY_FLAG);

            pf = PackFile_new(interp, 0);
            if (!pf)
                return 1;

            if (!PackFile_unpack(interp, pf,
                    (const opcode_t *)program_code_addr, bytecode_size))
                return 1;

            do_sub_pragmas(interp, pf->cur_cs, PBC_PBC, NULL);

            Parrot_pbc_load(interp, pf);

            PackFile_fixup_subs(interp, PBC_MAIN, NULL);
            Parrot_runcode(interp, argc, argv);
            Parrot_destroy(interp);
            Parrot_exit(interp, 0);
        }
